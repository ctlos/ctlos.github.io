<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Резервное копирование on</title><link>https://ctlos.github.io/wiki/backup/</link><description>Recent content in Резервное копирование on</description><generator>Hugo -- gohugo.io</generator><language>ru-RU</language><lastBuildDate>Tue, 06 Oct 2020 08:48:45 +0000</lastBuildDate><atom:link href="https://ctlos.github.io/wiki/backup/index.xml" rel="self" type="application/rss+xml"/><item><title>Резервное копирование</title><link>https://ctlos.github.io/wiki/backup/timeshift-rsync/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ctlos.github.io/wiki/backup/timeshift-rsync/</guid><description>Timeshift #
Отличная программа для создания backup-ов и восстановления системы: Timeshift. Данная утилита создает мгновенны снимки btrfs, а со стандартами ext работает через rsync. Установка.
yay -S timeshift
Интерфейс очень простой, главное правильно настроить исключения.
Это нужно для того, чтобы вы не дампили большие и не нужные каталоги вашей системы, т.к. это экономит время и место на диске, а работоспособность сохраняется. В пример могу привести каталог virtualbox, мне например он в копии системы не нужен, в том числе и смонтированный диск /home/st/files, думаю вы поняли.</description></item><item><title>Резервное копирование Squashfs</title><link>https://ctlos.github.io/wiki/backup/squashfs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ctlos.github.io/wiki/backup/squashfs/</guid><description>Mksquashfs #
Утилита сжатия.
pacman -S squashfs-tools arch-install-scripts
Смотрим разделы диска.
lsblk
Монтируем для чтения root,boot(home) и создаем образ, сжатие xz.
mount /dev/sda5 -o ro /mnt
mount /dev/sda2 -o ro /mnt/boot
mount /dev/sda7 -o ro /mnt/home
Архивируем.
mksquashfs /mnt ~/backup/myarch.sfs -comp xz
Исключение: -e /dir/file.
Отмонтируем по завершению.
umount -R /mnt
Восстановление #
Из рабочей системы, или Live-usb. Форматируем и монтируем поврежденный или новый раздел, boot по необходимости и др.</description></item><item><title>Работа с Netcat, ssh, rsync</title><link>https://ctlos.github.io/wiki/backup/netcat/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://ctlos.github.io/wiki/backup/netcat/</guid><description>Установка nc и pv #
sudo pacman -S gnu-netcat pv
Примеры передач.
cat dump.iso | pv -b | nc -l 3333
dd if=/dev/sdb5 | gzip -9 | nc -l 3333
tar -czf - /etc/ | pv -b | nc -l 3333
Примеры получения.
nc 187.187.55.18 3333 | pv -b &amp;gt; dump.iso
nc 187.187.55.18 3333 | pv -b &amp;gt; ddsdb5dump.img.gz
nc 187.187.55.18 3333 | pv -b &amp;gt; dump.tar.gz
Пример ssh туннеля #
Это нужно в том случае, если нет доступа к порту 3333.</description></item></channel></rss>